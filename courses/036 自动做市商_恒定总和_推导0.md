
### 详细推导```function swap(address _tokenIn, uint256 _amountIn)```的数学计算
#### 基础数据介绍
- $x$，代表当前流动池现有的代币A
- $y$，代表当前流动池现有的代币B
- $△x$，代表用户放入进的代币A
- $△y$，代表用户拿出的代币B

　

-----------------------------------------------------------------------------------

　

#### 使用"默认恒定"公式，推导出△y的值
- $(x + y) = (x + △x) + (y - △y)$
-
- $0 = △x - △y$
-
- $△y = △x$
- 加入手续费
- $△y = △x · (1 - 0.003)$
-
- $△y = △x · 0.997$
-
- $△y = \frac{△x · 997}{1000}$