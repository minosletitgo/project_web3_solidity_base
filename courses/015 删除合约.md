
#### selfdestruct()函数说明：
- 用来删除智能合约，并将该合约剩余ETH转到指定地址(目标地址，不需要有```receive()```或```fallback()```也能接收ETH)。
- 它最早被命名为suicide（自杀），但是这个词太敏感。为了保护抑郁的程序员，改名为selfdestruct。

#### 坎昆（Cancun）升级之前：
- ```selfdestruct()```使用后，ETH成功转移到指定账户
- 此时，合约已经销毁，再次调用目标合约的函数进行交互，则会失败

#### 坎昆（Cancun）升级：
- 2022年9月15日进行的。这次升级标志着以太坊从工作量证明（PoW）转向权益证明（PoS）共识机制。

#### 坎昆（Cancun）升级之后：
- 根据提案，"合约创建-自毁"这两个操作处在同一笔交易时才能生效(如果非得使用，建议如此处理)。
- ```selfdestruct()```使用后，ETH成功转移到指定账户
- 此时，合约已经销毁，再次调用目标合约的函数进行交互，则会失败(不一定会失败，合约语义的执行，还处于未确定)

---------------------------------------------------------------------------------------------------

#### 使用场景：
- 一些项目可能会在发现严重漏洞或安全问题时使用 ```selfdestruct()``` 来立即销毁合约，防止进一步的损失。
- 一些合约使用代理模式进行升级。旧合约可能会在新合约部署后被销毁，此时可能会调用 ```selfdestruct()``` 来释放资源。

#### 注意事项：
- 在 v0.8.18 版本中，selfdestruct 关键字被标记为「不再建议使用(或，弃用)」。
- 在一些情况下它会导致预期之外的合约语义，但由于目前还没有代替方案，目前只是对开发者做了编译阶段的警告，相关内容可以查看 EIP-6049。
- 最好设置为只有合约所有者可以调用。
- 一旦调用 ```selfdestruct()```，合约及其状态会永久丢失，无法恢复。
- 用户可能对能够被销毁的合约产生不安，因此许多项目选择不使用 ```selfdestruct()```，而是通过其他机制来处理合约的升级或关闭。
- 大型项目通常经过严格的安全审计，审计公司可能会建议开发者避免使用 ```selfdestruct()```，除非确实有必要。

#### 调用语法：
```
selfdestruct(payable(目标地址))；
```