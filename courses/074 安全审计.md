### 为什么需要审计
- 相关单词：```scope、audit```
- 如果不审计代码，那么，会直接或间接造成资金损失。
- 小到 ```NFT合约、token代币合约```，大到公链项目，一般都是需要审计的。

### 审计流程
```
    1. 商务谈判
    2. 编写审计需求
    3. 获取代码、理解审计文档
    4. 静态分析：使用自动化工具扫描，找出常见的问题（大部分是识别简单风险）
    5. 手动审计：将工具分析出来所有问题，人肉检查一遍，通过自身经验，进行二次查找与DEBUG
    6. 测试与模拟攻击
        编写POC（Proof of Concept，概念验证），进行有效性验证。
        创建恶意合约进行攻击。
    7. 评估风险等级、给出修复建议：
        Critical(致命级，给悬赏奖励) > 
        High(高位级，给悬赏奖励) > 
        Medium(中危级，给悬赏奖励) > 
        Low(低危级，给悬赏奖励) > 
        Informational/Non-Critical(代码可读性不佳/非关键)
    8. 纂写审计报告
        问题列表：列出严重性，POC 和修复建议
        代码优化：代码结构优化，Gas 优化
        合规性评估：代币标准 ERC20 和 ERC721 的合规性，确保规范性
```

### 漏洞严重程度
| **评估维度**   | **Critical**           | **High**            | **Medium**         | **Low**               |
| ---------- | ---------------------- | ------------------- | ------------------ | --------------------- |
| **资产损失风险** | 直接丢失（100% 概率）;     | 高概率丢失（50%-90%）; | 潜在丢失（10%-30%）; | 几乎无风险（<5%）;       |
| **利用难度**   | 低（公开 POC / 工具可复现）; | 中（需特定环境 / 参数）;  | 高（需组合多个漏洞）;    | 极高（理论可能 / 未公开案例）; |
| **行业漏洞占比** | <5%;               | 15%-20%;        | 30%-40%;       | 40%+;             |
| **典型修复时间** | 24 小时内;            | 1-2 周;          | 1-3 个月;        | 长期规划;             |

### 漏洞严重程度细分
```
    Critical
        定义：
            可直接导致资产损失、系统控制权丢失或核心功能崩溃的漏洞，利用难度低。
        修复优先级：
            立即修复            
        典型漏洞示例：
            1. 重入攻击（Reentrancy）
            2. 整数溢出 / 下溢（Integer Overflow/Underflow）
            3. 管理员权限永久锁定 / 后门
            4. 预言机操纵（价格喂价篡改）
            5. 无限代币铸币 / 增发
            6. 跨链桥双花漏洞
            
    High
        定义：
            可能导致资产风险或服务中断，需特定条件触发，利用难度中等。
        修复优先级：
            30天内修复            
        典型漏洞示例：
            1. 合约权限过度开放（非管理员执行关键操作）
            2. 时间戳依赖（区块时间操纵）
            3. 未验证的外部合约调用
            4. 私钥硬编码或明文传输
            5. 多重签名阈值不足（如 2/3 签名实际仅需 1/3）
            6. 闪电贷攻击链（需组合多个协议漏洞）
            
    Medium
        定义：
            影响非核心功能或存在潜在风险，需配合其他漏洞或特定场景才能利用。
        修复优先级：            
            季度内修复            
        典型漏洞示例：
            1. 未使用 SafeMath（但业务数值范围可控）
            2. 输入参数未验证（可能导致 Gas 耗尽）
            3. 抵押品清算机制缺陷（过度清算但未丢钱）
            4. 预言机更新延迟（短时间价格可操纵）
            5. 合约接口未隔离（暴露多余函数）
            6. 未实现紧急暂停（Pause）功能
            
    Low
        定义：
            不影响核心功能的细节问题，或需极端条件才可能被利用，修复优先级低。
        修复优先级：            
            迭代优化
        典型漏洞示例：
            1. 代码注释缺失或过时
            2. 变量命名不规范（如a、b）
            3. 未使用最新编译器版本（存在已知警告）
            4. 日志记录不完整（重要操作无事件追踪）
            5. 错误处理不完善（未返回明确错误码）
            6. 文档与代码逻辑不一致                                                           
```

### 审计机构
```
    Secure3（质量不错，属于开放式平台）    
    OpenZeppelin（质量高）、
    Runtime（质量不错）
    Consensys（质量不错）
    PeckShield（质量一般）
    链安（质量一般）
    慢雾科技-SlowMist（质量不太行）
    Trail Of Bits
    Quantstamp
    ScaleBit
    Certik
    Hacken    
```

### 审计工具
- ```Mythril```
   - 基于 ```Python``` 的静态分析工具，支持 ```EVM``` 和其他区块链的智能合约审计。
   - 开源地址：https://github.com/ConsenSys/mythril    
- ```Oyente```
  - 静态分析工具，专注于检测重入、交易依赖性等漏洞。
  - 开源地址：https://github.com/melonproject/oyente
- ```Securify```
  - 静态分析工具，用于检测以太坊合约漏洞。
  - 开源地址：https://github.com/eth-sri/securify2
- ```SmartCheck```
  - 支持多语言（```Solidity、Vyper``` 等）的静态分析工具。
  - 开源地址：https://github.com/axoni-io/smartcheck
- ```Slither```
  - 由 ```Trail of Bits``` 开发的静态分析工具，支持多种漏洞检测。
  - 开源地址：https://github.com/crytic/slither
- ```Manticore```
  - 动态分析工具，支持符号执行和漏洞检测。
  - 开源地址：https://github.com/trailofbits/manticore
- ```Echidna```
  - 基于模糊测试的符号执行工具，用于验证合约属性。
  - 开源地址：https://github.com/crytic/echidna
- ```Teether```
  - 二进制分析工具，专注于检测重入等漏洞。
  - 开源地址：https://github.com/trailofbits/teether
