
#### 详细推导```function swap```的数学计算
#### 基础数据介绍
- $x$，代表当前流动池现有的代币A
- $y$，代表当前流动池现有的代币B
- $△x$，代表用户放入进的代币A
- $△y$，代表用户拿出的代币B

　

#### 使用"默认恒定"公式
- $x·y = (x + △x)·(y - △y)$
-
- $x·y = x·y - x·△y + △x·y - △x·△y$
-
- $0 = 0 - x·△y + △x·y - △x·△y$
-
- x·△y + △x·△y = △x·y
-
- △y·(x+△x) = △x·y
-
- $△y = \frac{(△x · y)}{(x + △x)}$
-
- $△y = \frac{(△x · y)·(1 - 0.003)}{(x + △x)}$
-
- $△y = \frac{(△x · y)·(0.997)}{(x + △x)}$
-
- $△y = \frac{(△x · y)·997}{(x + △x)·1000}$